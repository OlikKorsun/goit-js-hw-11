{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryImg = document.querySelector(\".gallery\");\nlet htmlListOfGallery = ``;\n\n// експортуємо створену функцію createMarkup щоб можна було її вставити в pixabay.js\nexport function createMarkup(data) {\n  // обнуляємо розмітку сторінки якщо там є якісь попередні дані\n    htmlListOfGallery = \"\";\n    galleryImg.innerHTML = htmlListOfGallery;\n  // відмальовка розмітки з картинками, \n  // де data - сам об'єкт, \n  // hits - масив у ньому який містить потрібні дані\n  // largeImageUrl, tags, likes - потрібні дані\n    for (let i = 0; i < data.hits.length; i++) {\n        htmlListOfGallery += `<li class=\"gallery-item\">\n         <a class=\"gallery-link\" href=\"${data.hits[i].largeImageURL}\">\n         <img class=\"gallery-image\"\n                src=\"${data.hits[i].webformatURL}\"\n                alt=\"${data.hits[i].tags}\"/> </a>\n        <ul class=\"stat\">\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Likes</h2>\n           <p class=\"stat-value\">${data.hits[i].likes}</p>\n          </li>\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Views</h2>\n           <p class=\"stat-value\">${data.hits[i].views}</p>\n          </li>\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Comments</h2>\n           <p class=\"stat-value\">${data.hits[i].comments}</p>\n          </li>\n          <li class=\"detals-stat\">\n           <h2 class=\"description\">Downloads</h2>\n           <p class=\"stat-value\">${data.hits[i].downloads}</p>\n          </li>\n        </ul>\n        </li>`\n    }\n    // відмальовуємо за раз все що сформували\n    galleryImg.innerHTML = htmlListOfGallery;\n    // відкривашка великих красивих картинок\n    const lightbox = new SimpleLightbox('.gallery-item a', {\n            captionsData: \"alt\",\n            captionPosition: \"bottom\",\n            captionDelay: 250,\n    });\n\n    lightbox.refresh();\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// імпортуємо функцію createMarkup з файла render-functions.js\nimport { createMarkup } from \"./render-functions\";\n\nconst ourForm = document.querySelector(\".form\");\nconst button = document.querySelector(\".button\");\nconst loader = document.querySelector(\".loader\");\n\nconst paramPixabay = {\n    url : \"https://pixabay.com/api/\",\n    KEY : \"42515741-a33332df4257bc0cfcc74fb38\",\n    q : \"\",\n    image_type : \"photo\",\n    orientation : \"horizontal\",\n    safesearch : true,\n}\n\nloader.style.display = \"none\";\n// підслуховувач на відправку\nourForm.addEventListener(\"submit\", getPhoto);\n\n// функція яка виконується в підслуховувачі\nfunction getPhoto(event) {\n    loader.style.display = \"block\";\n    // забороняємо браузеру виконувати стандартні сценарії\n    event.preventDefault();\n    // зчитуємо які дані ввели в поле інпут\n    paramPixabay.q = event.target.search.value.trim();\n\n    // перевірка на порожнє поле\n    if (paramPixabay.q === \"\") {\n        button.disabled = true;\n        iziToast.warning({\n                title: \"Look at me\",\n                message: `Ви не ввели що треба шукати`,\n                messageColor: 'black',\n                messageSize: '16',\n                backgroundColor: 'orange',\n                theme: 'dark',\n                position: 'topRight',\n            });\n    } else {\n        button.disabled = false;\n        // запит який формується на основі введеного пошуку\n        fetch(`${paramPixabay.url}?key=${paramPixabay.KEY}&q=${paramPixabay.q}&image_type=${paramPixabay.image_type}&orientation=${paramPixabay.orientation}&safesearch=${paramPixabay.safesearch}`)\n            .then(response => {\n            // ловимо 404 помилку або повертаємо \n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n            })\n            // отриманий об'єкт вже розджейсонений і готовий для використання\n            .then(data => {\n            // перевірка чи знайшло за запитом картинки\n            if (data.hits.length === 0 ) {\n                return iziToast.error({\n                title: 'Error',\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                messageColor: 'white',\n                messageSize: '16',\n                backgroundColor: 'red',\n                theme: 'dark',\n                position: 'topRight',\n            });\n            } else {\n                // якщо знайшло - то передаємо у функцію об'єкт\n                createMarkup(data);\n            }\n            })\n            .catch(error => {\n            // ловимо помилки\n            console.log(error);\n            })\n            .finally(() => {\n            // в будь-якому варіанті обнуляємо поле інпут від старого запиту\n            ourForm.reset();\n        });\n    };\n};"],"names":["galleryImg","htmlListOfGallery","createMarkup","data","i","SimpleLightbox","ourForm","button","loader","paramPixabay","getPhoto","event","iziToast","response","error"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,UAAU,EACpD,IAAIC,EAAoB,GAGjB,SAASC,EAAaC,EAAM,CAE/BF,EAAoB,GACpBD,EAAW,UAAYC,EAKvB,QAASG,EAAI,EAAGA,EAAID,EAAK,KAAK,OAAQC,IAClCH,GAAqB;AAAA,yCACYE,EAAK,KAAKC,CAAC,EAAE,aAAa;AAAA;AAAA,uBAE5CD,EAAK,KAAKC,CAAC,EAAE,YAAY;AAAA,uBACzBD,EAAK,KAAKC,CAAC,EAAE,IAAI;AAAA;AAAA;AAAA;AAAA,mCAILD,EAAK,KAAKC,CAAC,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA,mCAIlBD,EAAK,KAAKC,CAAC,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA,mCAIlBD,EAAK,KAAKC,CAAC,EAAE,QAAQ;AAAA;AAAA;AAAA;AAAA,mCAIrBD,EAAK,KAAKC,CAAC,EAAE,SAAS;AAAA;AAAA;AAAA,eAMrDJ,EAAW,UAAYC,EAEN,IAAII,EAAe,kBAAmB,CAC/C,aAAc,MACd,gBAAiB,SACjB,aAAc,GAC1B,CAAK,EAEQ,QAAO,CACpB,CCzCA,MAAMC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAe,CACjB,IAAM,2BACN,IAAM,qCACN,EAAI,GACJ,WAAa,QACb,YAAc,aACd,WAAa,EACjB,EAEAD,EAAO,MAAM,QAAU,OAEvBF,EAAQ,iBAAiB,SAAUI,CAAQ,EAG3C,SAASA,EAASC,EAAO,CACrBH,EAAO,MAAM,QAAU,QAEvBG,EAAM,eAAc,EAEpBF,EAAa,EAAIE,EAAM,OAAO,OAAO,MAAM,OAGvCF,EAAa,IAAM,IACnBF,EAAO,SAAW,GAClBK,EAAS,QAAQ,CACT,MAAO,aACP,QAAS,8BACT,aAAc,QACd,YAAa,KACb,gBAAiB,SACjB,MAAO,OACP,SAAU,UAC1B,CAAa,IAELL,EAAO,SAAW,GAElB,MAAM,GAAGE,EAAa,GAAG,QAAQA,EAAa,GAAG,MAAMA,EAAa,CAAC,eAAeA,EAAa,UAAU,gBAAgBA,EAAa,WAAW,eAAeA,EAAa,UAAU,EAAE,EACtL,KAAKI,GAAY,CAElB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAa,EAEA,KAAKV,GAAQ,CAEd,GAAIA,EAAK,KAAK,SAAW,EACrB,OAAOS,EAAS,MAAM,CACtB,MAAO,QACP,QAAS,2EACT,aAAc,QACd,YAAa,KACb,gBAAiB,MACjB,MAAO,OACP,SAAU,UAC1B,CAAa,EAGGV,EAAaC,CAAI,CAEjC,CAAa,EACA,MAAMW,GAAS,CAEhB,QAAQ,IAAIA,CAAK,CAC7B,CAAa,EACA,QAAQ,IAAM,CAEfR,EAAQ,MAAK,CACzB,CAAS,EAET"}